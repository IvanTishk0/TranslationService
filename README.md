# Translation Service

Translation Service - это веб-приложение, разработанное на Spring Boot, которое предоставляет функциональность для перевода текста на различные языки с использованием API Яндекс Переводчика. Оно также позволяет хранить историю переводов и управлять ими, а также реализует многопоточный первод(максимум 10 потоков).

## Содержание

- [Требования](#требования)
- [Установка](#установка)
- [Использование](#использование)
- [API](#api)
- [Зависимости](#зависимости)

## Требования

- Java 17 или выше
- Maven 3.6.3 или выше
- Доступ к интернету для использования API Яндекс.Переводчика
- База данных (например, MySQL) для хранения истории переводов

## Структура базы данных

### Таблица: translation_requests

Таблица `translation_requests` используется для хранения запросов на перевод. Она содержит информацию о каждом запросе, включая IP-адрес пользователя, текст для перевода и перевод текста. Ниже приведены поля таблицы с их типами данных и свойствами.

| Поле             | Тип данных    | Свойства                    | Описание                                          |
|------------------|---------------|-----------------------------|--------------------------------------------------|
| `id`             | BIGINT        | PK, NN, AI                  | Уникальный идентификатор запроса на перевод.     |
| `user_ip`        | VARCHAR(255)  | NN                          | IP-адрес пользователя, который создал запрос.   |
| `input_text`     | VARCHAR(255)  | NN                          | Исходный текст, который нужно перевести.        |
| `translated_text` | VARCHAR(255)  |                           | Переведенный текст.                              |
| `target_language` | VARCHAR(255)  | NN                          | Язык, на который нужно перевести текст.          |
| `timestamp`      | TIMESTAMP     | NN, DEFAULT CURRENT_TIMESTAMP| Дата и время запроса на перевод.                 |

### Свойства полей

- **PK** - Primary Key (первичный ключ)
- **NN** - Not Null (не может быть NULL)
- **UQ** - Unique (уникальное значение)
- **B** - Binary (бинарный тип)
- **UN** - Unsigned (без знака)
- **ZF** - Zero Fill (добавление нулей в начале)
- **AI** - Auto Increment (автоинкремент)
- **G** - Generated (сгенерированное значение)

### Значения по умолчанию

- Поле `timestamp` по умолчанию устанавливается в `CURRENT_TIMESTAMP`, что означает, что оно будет автоматически заполнено текущей датой и временем при создании новой записи.
- Поля могут принимать значение `NULL`, если это не указано как обязательное (NN).
### Для создания таблицы можете использовать команду:
  ```
  CREATE TABLE translation_requests (
    id BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL,
    user_ip VARCHAR(255) NOT NULL,
    input_text VARCHAR(255) NOT NULL,
    translated_text VARCHAR(255),
    target_language VARCHAR(255) NOT NULL,
    timestamp TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP);
```
## Установка

1. Убедитесь, что у вас установлены [Java JDK](https://www.oracle.com/java/technologies/javase-jdk11-downloads.html) (минимум 11 версии) и [Apache Maven](https://maven.apache.org/download.cgi).

2. Клонируйте репозиторий с помощью Git:
```bash
   git clone https://github.com/IvanTishk0/TranslationService.git
```
3. Перейдите в директорию проекта:
```
   cd TranslationService
```
4. Импортируйте проект в вашу IDE (например, IntelliJ IDEA или Eclipse).
   Настройте параметры подключения к базе данных в файле application.properties:
   properties
```
   spring.datasource.url=jdbc:mysql://localhost:3306/ваша_база_данных
   spring.datasource.username=ваш_пользователь
   spring.datasource.password=ваш_пароль
```
5. Установите необходимые зависимости и соберите проект:
```
   mvn clean install
```
6. Запустите приложение:
```
   mvn spring-boot:run
```
## Использование
После запуска приложения вы сможете использовать веб-интерфейс для перевода текста.\
Для этого необходимо зайти на страницу 
```
http://localhost:8080
```
Главная страница приложения предоставит вам форму для ввода текста и выбора языка перевода.
### Главная страница
На главной странице отображается форма для ввода текста и выбора языка перевода. Форма включает в себя следующие элементы:

Поле ввода текста: здесь вы можете ввести текст для перевода.
Выпадающий список языков: это поле с доступными языками для перевода, загружается из метода getLanguages() вашего сервиса.
### Перевод текста
Когда вы заполните форму и нажмёте кнопку "Перевести", будет отправлен POST-запрос на /translate. Контроллер TextInputController обработает этот запрос, используя TranslationService для выполнения перевода.
### Отображение переведённого текста
После успешного перевода, переведённый текст будет отображён на странице под формой.
## API
### Перевод текста
   URL: /translate\
   Метод: POST\
   Тело запроса:
```
{
  "inputText": "строка текста для перевода",
  "targetLanguage": "краткий код языка"
}
```
Ответ:
```
{
  "translatedText": "переведённый текст"
}
```
## Зависимости

В данном проекте используются следующие зависимости:

- **spring-boot-starter-web**: для создания веб-приложений на основе Spring MVC.
- **spring-boot-starter-data-jpa**: для работы с данными и взаимодействия с базами данных через Java Persistence API (JPA).
- **spring-boot-starter-thymeleaf**: для обработки шаблонов с использованием Thymeleaf.
- **spring-boot-starter-jdbc**: для работы с JDBC и предоставления поддержки работы с базами данных.
- **spring-boot-starter-test**: для тестирования Spring приложений (включает JUnit, Mockito и другие).
- **json (org.json)**: библиотека для работы с JSON-форматом.
- **javax.servlet-api**: интерфейсы сервлетов (предоставленные - предназначены для использования вместе с сервером приложений).
- **jstl**: библиотека тегов для Java Server Pages (JSP).
- **mysql-connector-java**: драйвер для подключения к MySQL базам данных ( runtime).
- **gson**: библиотека от Google для работы с JSON (сериализация и десериализация объектов Java).

Версии зависимостей:
- Spring Boot: 3.3.2
- Java: 17
- MySQL Connector: 8.0.33
- Gson: 2.8.9

Эти зависимости могут быть добавлены в ваш `pom.xml` и автоматически управляться Maven.
